# Production Environment Configuration for Strapi CMS
# Copy this file to .env.production for production deployment
#
# IMPORTANT: Do not leave empty values like `VARIABLE=`, as they are interpreted as empty strings.
# If you want to use default values, remove or comment the line completely.

# ========================== Strapi Core Configuration ==========================

# Production server configuration
HOST=0.0.0.0
PORT=1337
NODE_ENV=production

# CRITICAL: Generate new secrets for production using:
# node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"

# App keys for session encryption (comma-separated, minimum 4)
APP_KEYS=GENERATE_NEW_APP_KEY_1,GENERATE_NEW_APP_KEY_2,GENERATE_NEW_APP_KEY_3,GENERATE_NEW_APP_KEY_4

# Salt for API token generation
API_TOKEN_SALT=GENERATE_NEW_API_TOKEN_SALT

# JWT secret for admin panel authentication
ADMIN_JWT_SECRET=GENERATE_NEW_ADMIN_JWT_SECRET

# JWT secret for users-permissions plugin
JWT_SECRET=GENERATE_NEW_JWT_SECRET

# Transfer token salt for data transfer between Strapi instances
TRANSFER_TOKEN_SALT=GENERATE_NEW_TRANSFER_TOKEN_SALT

# Production URL of your Strapi instance
APP_URL=https://your-strapi-instance.strapiapp.com

# Admin panel backend URL (usually same as APP_URL)
STRAPI_ADMIN_BACKEND_URL=https://your-strapi-instance.strapiapp.com

# Enable cron jobs in production
CRON_ENABLED=true

# Enable populated relations in webhooks
WEBHOOKS_POPULATE_RELATIONS=true

# ========================== Database Configuration ==========================

# Production database connection
DATABASE_CLIENT=postgres

# For managed PostgreSQL (Strapi Cloud, Railway, etc.)
DATABASE_URL=postgresql://username:password@hostname:port/database_name?sslmode=require

# Alternative: Individual connection parameters
# DATABASE_HOST=your-db-host.com
# DATABASE_PORT=5432
# DATABASE_NAME=your_production_db
# DATABASE_USERNAME=your_db_user
# DATABASE_PASSWORD=your_strong_db_password
# DATABASE_SSL=true

# Database connection pool settings
# DATABASE_POOL_MIN=2
# DATABASE_POOL_MAX=10

# ========================== File Storage (AWS S3) ==========================

# AWS credentials for S3 file uploads
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_ACCESS_SECRET=your_aws_secret_access_key
AWS_REGION=us-east-1
AWS_BUCKET=your-production-bucket-name

# S3 security and permissions
AWS_ACL=public-read
AWS_SIGNED_URL_EXPIRES=900

# CDN configuration for S3
CDN_URL=https://your-cloudfront-domain.com
CDN_ROOT_PATH=uploads

# ========================== Email Configuration ==========================

# Mailgun email provider
MAILGUN_API_KEY=your_mailgun_api_key
MAILGUN_DOMAIN=your-mailgun-domain.com
MAILGUN_HOST=https://api.mailgun.net
MAILGUN_EMAIL=noreply@your-domain.com

# Alternative: SendGrid
# SENDGRID_API_KEY=your_sendgrid_api_key
# SENDGRID_DEFAULT_FROM=noreply@your-domain.com
# SENDGRID_DEFAULT_REPLY_TO=support@your-domain.com

# ========================== Error Monitoring ==========================

# Sentry for error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ========================== Frontend Integration ==========================

# Frontend application URL for email templates and redirects
CLIENT_URL=https://your-domain.com

# Account activation page URL
CLIENT_ACCOUNT_ACTIVATION_URL=https://your-domain.com/auth/activate

# Password reset page URL  
CLIENT_PASSWORD_RESET_URL=https://your-domain.com/auth/reset-password

# ========================== Preview & Revalidation ==========================

# Strapi Preview feature configuration
STRAPI_PREVIEW_ENABLED=true
STRAPI_PREVIEW_SECRET=your_strong_preview_secret_here

# ISR revalidation configuration
NEXT_REVALIDATE_URL=https://your-domain.com
FRONTEND_URL=https://your-domain.com
REVALIDATE_SECRET=your_strong_revalidation_secret_here

# ========================== Security Configuration ==========================

# CORS origins (comma-separated)
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# Trusted hosts for security
TRUSTED_HOSTS=your-domain.com,www.your-domain.com

# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX=100
RATE_LIMIT_DURATION=60000

# ========================== Performance & Caching ==========================

# Enable Redis for caching (if available)
# REDIS_URL=redis://your-redis-instance:6379

# Cache TTL settings (in seconds)
# CACHE_TTL=3600

# ========================== Backup & Maintenance ==========================

# Database backup configuration
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=your-backup-bucket

# ========================== Third-party Integrations ==========================

# Stripe payment processing
# STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
# STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Analytics integration
# GOOGLE_ANALYTICS_API_KEY=your_ga_api_key

# ========================== Custom Plugin Configuration ==========================

# CKEditor plugin configuration
CKEDITOR_LICENSE_KEY=your_ckeditor_license_key

# SEO plugin configuration
# SEO_DEFAULT_TITLE=Your Site Name
# SEO_DEFAULT_DESCRIPTION=Your site description

# ========================== Logging & Debugging ==========================

# Log level for production (error | warn | info | debug)
LOG_LEVEL=warn

# Enable request logging
ENABLE_REQUEST_LOGGING=false

# Strapi admin logging
STRAPI_LOG_LEVEL=warn

# ========================== Deployment Specific ==========================

# For Strapi Cloud deployment
# STRAPI_CLOUD_PROJECT_ID=your_project_id
# STRAPI_CLOUD_REGION=us-east-1

# For Railway deployment  
# RAILWAY_PROJECT_ID=your_project_id

# For Heroku deployment
# HEROKU_APP_NAME=your-app-name

# ========================== Health Checks & Monitoring ==========================

# Health check endpoint authentication
# HEALTH_CHECK_SECRET=your_health_check_secret

# Uptime monitoring webhook
# UPTIME_WEBHOOK_URL=https://your-monitoring-service.com/webhook